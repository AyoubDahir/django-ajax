{% extends "base.html" %}

{% block title %}
home
{% endblock title %}


{% block body %}
<h1>view all data here </h1>

<div class="container-fluid">
    <table class="table table-striped table-sm" id="display-data">
        <thead class="thead-dark">
            <tr>
                <th>full name</th>
                <th>age</th>
                <th>address</th>
                <th>phone</th>
                <th>date created</th>
                <th>updated</th>
            </tr>
        </thead>
        <tbody>
        {% for patient in patients %}
        <tr>
            <td>{{patient.fullname}}</td>
            <td>{{patient.age}}</td>
            <td>{{patient.address}}</td>
            <td>{{patient.phone}}</td>
            <td>{{patient.date_created}}</td>
            <td>{{patient.updated}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

<!-- <table class="table" id="display-data">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">fullname</th>
        <th scope="col">age</th>
        <th scope="col">addrress</th>
        <th scope="col">phone</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">1</th>
        <td >ayuub</td>
        <td>15</td>
        <td>hargeisa</td>
        <td>4232116</td>
      </tr>
     
    </tbody>
  </table> -->
  





<script>
    $(document).ready(function(){


        setInterval(function(){
            $.ajax({
                type:"GET",
                url:"{% url 'getpatients' %}",
                success:function(response){
                    $("#display-data").empty();

                 
                    
                    for(var key in response.profiles){
                        var dato = '<tr>';
                            dato += '<td>'+response.profiles[key].fullname+'</td>';
            
                            dato += '<td>'+response.profiles[key].age+'</td>';
                            dato += '<td>'+response.profiles[key].address+'</td>';
                            dato += '<td>'+response.profiles[key].phone+'</td><tr>';


                           

                            
                    }

                    $('#display-data tbody').append(dato);

                  

                    
                },

            })

        },1000)
    });

</script>

    
{% endblock body %}

    